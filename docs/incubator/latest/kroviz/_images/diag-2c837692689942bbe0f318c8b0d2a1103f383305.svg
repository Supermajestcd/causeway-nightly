<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="929px" preserveAspectRatio="none" style="width:1430px;height:929px;background:#FFFFFF;" version="1.1" viewBox="0 0 1430 929" width="1430px" zoomAndPan="magnify"><defs/><g><!--MD5=[5336d0432c5753478f8bb0248199b33b]
cluster handler--><g id="cluster_handler"><path d="M834.5,585 L895.5,585 A3.75,3.75 0 0 1 898,587.5 L905,607.2969 L1035.5,607.2969 A2.5,2.5 0 0 1 1038,609.7969 L1038,768.5 A2.5,2.5 0 0 1 1035.5,771 L834.5,771 A2.5,2.5 0 0 1 832,768.5 L832,587.5 A2.5,2.5 0 0 1 834.5,585 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="832" x2="905" y1="607.2969" y2="607.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="60" x="836" y="599.9951">handler</text></g><!--MD5=[01435ace8273dc3cae88e7f376e4d373]
cluster core--><g id="cluster_core"><path d="M8.5,6 L45.5,6 A3.75,3.75 0 0 1 48,8.5 L55,28.2969 L576.5,28.2969 A2.5,2.5 0 0 1 579,30.7969 L579,919.5 A2.5,2.5 0 0 1 576.5,922 L8.5,922 A2.5,2.5 0 0 1 6,919.5 L6,8.5 A2.5,2.5 0 0 1 8.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="55" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="36" x="10" y="20.9951">core</text></g><!--MD5=[2e31800f208179cab94650aeb782e4d8]
cluster event--><g id="cluster_event"><path d="M32.5,49 L78.5,49 A3.75,3.75 0 0 1 81,51.5 L88,71.2969 L552.5,71.2969 A2.5,2.5 0 0 1 555,73.7969 L555,503.5 A2.5,2.5 0 0 1 552.5,506 L32.5,506 A2.5,2.5 0 0 1 30,503.5 L30,51.5 A2.5,2.5 0 0 1 32.5,49 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="88" y1="71.2969" y2="71.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="45" x="34" y="63.9951">event</text></g><!--MD5=[e8161453ee08a0169facd928153a06ce]
cluster aggregator--><g id="cluster_aggregator"><path d="M217.5,609 L306.5,609 A3.75,3.75 0 0 1 309,611.5 L316,631.2969 L432.5,631.2969 A2.5,2.5 0 0 1 435,633.7969 L435,895.5 A2.5,2.5 0 0 1 432.5,898 L217.5,898 A2.5,2.5 0 0 1 215,895.5 L215,611.5 A2.5,2.5 0 0 1 217.5,609 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="215" x2="316" y1="631.2969" y2="631.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="88" x="219" y="623.9951">aggregator</text></g><!--MD5=[ffd769195028dd438823d2edcff41d80]
cluster to--><g id="cluster_to"><path d="M605.5,624.5 L622.5,624.5 A3.75,3.75 0 0 1 625,627 L632,646.7969 L766.5,646.7969 A2.5,2.5 0 0 1 769,649.2969 L769,729 A2.5,2.5 0 0 1 766.5,731.5 L605.5,731.5 A2.5,2.5 0 0 1 603,729 L603,627 A2.5,2.5 0 0 1 605.5,624.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="603" x2="632" y1="646.7969" y2="646.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="16" x="607" y="639.4951">to</text></g><!--MD5=[c429691f2fe3ffc642d3e6ed879a8b4b]
cluster remote--><g id="cluster_remote"><polygon fill="none" points="1062,629.5,1072,619.5,1413,619.5,1413,721.5,1403,731.5,1062,731.5,1062,629.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1403" x2="1413" y1="629.5" y2="619.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1403" y1="629.5" y2="629.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="1403" x2="1403" y1="629.5" y2="731.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="57" x="1205" y="645.4951">remote</text></g><!--MD5=[c8ff661d8810405741f708d20018b1ce]
class ResponseHandler--><g id="elem_ResponseHandler"><rect codeLine="2" fill="#F1F1F1" height="135.4219" id="ResponseHandler" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="173" x="848.5" y="620"/><ellipse cx="863.5" cy="647.1172" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M866.4688,652.7578 Q865.8906,653.0547 865.25,653.1953 Q864.6094,653.3516 863.9063,653.3516 Q861.4063,653.3516 860.0781,651.7109 Q858.7656,650.0547 858.7656,646.9297 Q858.7656,643.8047 860.0781,642.1484 Q861.4063,640.4922 863.9063,640.4922 Q864.6094,640.4922 865.25,640.6484 Q865.9063,640.8047 866.4688,641.1016 L866.4688,643.8203 Q865.8438,643.2422 865.25,642.9766 Q864.6563,642.6953 864.0313,642.6953 Q862.6875,642.6953 862,643.7734 Q861.3125,644.8359 861.3125,646.9297 Q861.3125,649.0234 862,650.1016 Q862.6875,651.1641 864.0313,651.1641 Q864.6563,651.1641 865.25,650.8984 Q865.8438,650.6172 866.4688,650.0391 L866.4688,652.7578 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="60" x="918" y="636.1387">«Facade»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="145" x="875.5" y="650.1074">«ChainOfResponsibility»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="886" y="665.9326">ResponseHandler</text><line style="stroke:#181818;stroke-width:0.5;" x1="849.5" x2="1020.5" y1="674.2344" y2="674.2344"/><line style="stroke:#181818;stroke-width:0.5;" x1="849.5" x2="1020.5" y1="682.2344" y2="682.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="854.5" y="699.2295">handle(LogEntry)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="854.5" y="715.5264">canHandle(json)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="854.5" y="731.8232">doHandle()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="854.5" y="748.1201">parse(json)</text></g><!--MD5=[3b2d7f27bec20edac89f8d9c90732cb8]
class XHR--><g id="elem_XHR"><rect codeLine="12" fill="#F1F1F1" height="64.2969" id="XHR" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67" x="471.5" y="348.5"/><ellipse cx="489.2" cy="364.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M492.1688,370.1406 Q491.5906,370.4375 490.95,370.5781 Q490.3094,370.7344 489.6063,370.7344 Q487.1063,370.7344 485.7781,369.0938 Q484.4656,367.4375 484.4656,364.3125 Q484.4656,361.1875 485.7781,359.5313 Q487.1063,357.875 489.6063,357.875 Q490.3094,357.875 490.95,358.0313 Q491.6063,358.1875 492.1688,358.4844 L492.1688,361.2031 Q491.5438,360.625 490.95,360.3594 Q490.3563,360.0781 489.7313,360.0781 Q488.3875,360.0781 487.7,361.1563 Q487.0125,362.2188 487.0125,364.3125 Q487.0125,366.4063 487.7,367.4844 Q488.3875,368.5469 489.7313,368.5469 Q490.3563,368.5469 490.95,368.2813 Q491.5438,368 492.1688,367.4219 L492.1688,370.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="503.8" y="369.3467">XHR</text><line style="stroke:#181818;stroke-width:0.5;" x1="472.5" x2="537.5" y1="380.5" y2="380.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="472.5" x2="537.5" y1="388.5" y2="388.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="477.5" y="405.4951">invoke()</text></g><!--MD5=[36f4d8c507a01d05cb42b0aec07b28f8]
class EventStore--><g id="elem_EventStore"><rect codeLine="15" fill="#F1F1F1" height="151.7188" id="EventStore" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="46" y="304.5"/><ellipse cx="61" cy="331.6172" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M63.9688,337.2578 Q63.3906,337.5547 62.75,337.6953 Q62.1094,337.8516 61.4063,337.8516 Q58.9063,337.8516 57.5781,336.2109 Q56.2656,334.5547 56.2656,331.4297 Q56.2656,328.3047 57.5781,326.6484 Q58.9063,324.9922 61.4063,324.9922 Q62.1094,324.9922 62.75,325.1484 Q63.4063,325.3047 63.9688,325.6016 L63.9688,328.3203 Q63.3438,327.7422 62.75,327.4766 Q62.1563,327.1953 61.5313,327.1953 Q60.1875,327.1953 59.5,328.2734 Q58.8125,329.3359 58.8125,331.4297 Q58.8125,333.5234 59.5,334.6016 Q60.1875,335.6641 61.5313,335.6641 Q62.1563,335.6641 62.75,335.3984 Q63.3438,335.1172 63.9688,334.5391 L63.9688,337.2578 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53" x="98.5" y="320.6387">«Cache»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="104" x="73" y="334.6074">«EventSourcing»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="87" y="350.4326">EventStore</text><line style="stroke:#181818;stroke-width:0.5;" x1="47" x2="177" y1="358.7344" y2="358.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="52" y="375.7295">log:LogEntry[]</text><line style="stroke:#181818;stroke-width:0.5;" x1="47" x2="177" y1="383.0313" y2="383.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="52" y="400.0264">start()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="52" y="416.3232">end()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="52" y="432.6201">fault()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="52" y="448.917">find(href)</text></g><!--MD5=[cb32f8b1b756f5d42df70837c47813f1]
class LogEntry--><g id="elem_LogEntry"><rect codeLine="22" fill="#F1F1F1" height="219.2344" id="LogEntry" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="223" x="213.5" y="271"/><ellipse cx="270.75" cy="291.1328" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M273.7188,296.7734 Q273.1406,297.0703 272.5,297.2109 Q271.8594,297.3672 271.1563,297.3672 Q268.6563,297.3672 267.3281,295.7266 Q266.0156,294.0703 266.0156,290.9453 Q266.0156,287.8203 267.3281,286.1641 Q268.6563,284.5078 271.1563,284.5078 Q271.8594,284.5078 272.5,284.6641 Q273.1563,284.8203 273.7188,285.1172 L273.7188,287.8359 Q273.0938,287.2578 272.5,286.9922 Q271.9063,286.7109 271.2813,286.7109 Q269.9375,286.7109 269.25,287.7891 Q268.5625,288.8516 268.5625,290.9453 Q268.5625,293.0391 269.25,294.1172 Q269.9375,295.1797 271.2813,295.1797 Q271.9063,295.1797 272.5,294.9141 Q273.0938,294.6328 273.7188,294.0547 L273.7188,296.7734 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="104" x="289.25" y="287.1387">«EventSourcing»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="311.25" y="302.9639">LogEntry</text><line style="stroke:#181818;stroke-width:0.5;" x1="214.5" x2="435.5" y1="311.2656" y2="311.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="219.5" y="328.2607">url:Href</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="219.5" y="344.5576">title:String</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="219.5" y="360.8545">startedAt:Date</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="219.5" y="377.1514">updatedAt:Date</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="219.5" y="393.4482">request:String</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="219.5" y="409.7451">response:String</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="219.5" y="426.042">blob:Blob</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="219.5" y="442.3389">object:TransferObject</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="211" x="219.5" y="458.6357">aggregators:BaseAggregator[]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="219.5" y="474.9326">cacheHits:int</text><line style="stroke:#181818;stroke-width:0.5;" x1="214.5" x2="435.5" y1="482.2344" y2="482.2344"/></g><!--MD5=[4eb726f03d9593e8bfc030d2c0e199f8]
class ResourceProxy--><g id="elem_ResourceProxy"><rect codeLine="34" fill="#F1F1F1" height="121.4531" id="ResourceProxy" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172" x="367" y="84"/><ellipse cx="398.2" cy="104.1328" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M401.1688,109.7734 Q400.5906,110.0703 399.95,110.2109 Q399.3094,110.3672 398.6063,110.3672 Q396.1063,110.3672 394.7781,108.7266 Q393.4656,107.0703 393.4656,103.9453 Q393.4656,100.8203 394.7781,99.1641 Q396.1063,97.5078 398.6063,97.5078 Q399.3094,97.5078 399.95,97.6641 Q400.6063,97.8203 401.1688,98.1172 L401.1688,100.8359 Q400.5438,100.2578 399.95,99.9922 Q399.3563,99.7109 398.7313,99.7109 Q397.3875,99.7109 396.7,100.7891 Q396.0125,101.8516 396.0125,103.9453 Q396.0125,106.0391 396.7,107.1172 Q397.3875,108.1797 398.7313,108.1797 Q399.3563,108.1797 399.95,107.9141 Q400.5438,107.6328 401.1688,107.0547 L401.1688,109.7734 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="48" x="443.8" y="100.1387">«Proxy»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="415.8" y="115.9639">ResourceProxy</text><line style="stroke:#181818;stroke-width:0.5;" x1="368" x2="538" y1="124.2656" y2="124.2656"/><line style="stroke:#181818;stroke-width:0.5;" x1="368" x2="538" y1="132.2656" y2="132.2656"/><ellipse cx="378" cy="145.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="387" y="149.2607">load(tObject:Tobject)</text><ellipse cx="378" cy="162.2109" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="387" y="165.5576">fetch(...)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="375" y="175.5078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="387" y="181.8545">process()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="375" y="191.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="387" y="198.1514">processCached()</text></g><!--MD5=[d20444995493a81cbf0591ffcbf8e0b7]
class BaseAggregator--><g id="elem_BaseAggregator"><rect codeLine="47" fill="#F1F1F1" height="86.5313" id="BaseAggregator" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="144" x="253" y="644"/><ellipse cx="268" cy="671.1172" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M268.1094,666.4609 L266.9531,671.5391 L269.2813,671.5391 L268.1094,666.4609 Z M266.625,664.2266 L269.6094,664.2266 L272.9688,676.6172 L270.5156,676.6172 L269.75,673.5547 L266.4688,673.5547 L265.7188,676.6172 L263.2813,676.6172 L266.625,664.2266 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53" x="311.5" y="660.1387">«Redux»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85" x="295.5" y="674.1074">«Aggregator»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="112" x="282" y="689.9326">BaseAggregator</text><line style="stroke:#181818;stroke-width:0.5;" x1="254" x2="396" y1="698.2344" y2="698.2344"/><line style="stroke:#181818;stroke-width:0.5;" x1="254" x2="396" y1="706.2344" y2="706.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="259" y="723.2295">update(logEntry)</text></g><!--MD5=[15240494145cdab917091a6524b04d15]
class AggregatorWithLayout--><g id="elem_AggregatorWithLayout"><rect codeLine="50" fill="#F1F1F1" height="64.2969" id="AggregatorWithLayout" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="188" x="231" y="818"/><ellipse cx="246" cy="834" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M246.1094,829.3438 L244.9531,834.4219 L247.2813,834.4219 L246.1094,829.3438 Z M244.625,827.1094 L247.6094,827.1094 L250.9688,839.5 L248.5156,839.5 L247.75,836.4375 L244.4688,836.4375 L243.7188,839.5 L241.2813,839.5 L244.625,827.1094 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="156" x="260" y="838.8467">AggregatorWithLayout</text><line style="stroke:#181818;stroke-width:0.5;" x1="232" x2="418" y1="850" y2="850"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="237" y="866.9951">layout:Layout</text><line style="stroke:#181818;stroke-width:0.5;" x1="232" x2="418" y1="874.2969" y2="874.2969"/></g><!--MD5=[1baf32c238e7b10acca77db68c6197d6]
class TransferObject--><g id="elem_TransferObject"><rect codeLine="58" fill="#F1F1F1" height="56.2656" id="TransferObject" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="619.5" y="659.5"/><ellipse cx="634.5" cy="679.6328" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M630.4219,675.3984 L630.4219,673.2422 L637.8125,673.2422 L637.8125,675.3984 L635.3438,675.3984 L635.3438,683.4766 L637.8125,683.4766 L637.8125,685.6328 L630.4219,685.6328 L630.4219,683.4766 L632.8906,683.4766 L632.8906,675.3984 L630.4219,675.3984 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="104" x="647" y="675.6387">«TransferObject»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="101" x="648.5" y="691.4639">TransferObject</text><line style="stroke:#181818;stroke-width:0.5;" x1="620.5" x2="751.5" y1="699.7656" y2="699.7656"/><line style="stroke:#181818;stroke-width:0.5;" x1="620.5" x2="751.5" y1="707.7656" y2="707.7656"/></g><!--MD5=[28184d3ee69931ae1dfa8d767c0bf202]
class ApacheCauseway--><g id="elem_ApacheCauseway"><rect codeLine="69" fill="#F1F1F1" height="56.2656" id="ApacheCauseway" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="1078" y="659.5"/><ellipse cx="1093" cy="679.6328" fill="#FF7700" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1097.2344,675.3984 L1091.9531,675.3984 L1091.9531,678.0703 L1096.75,678.0703 L1096.75,680.2266 L1091.9531,680.2266 L1091.9531,685.6328 L1089.5156,685.6328 L1089.5156,673.2422 L1097.2344,673.2422 L1097.2344,675.3984 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85" x="1125.5" y="675.6387">«FrameWork»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1107" y="691.4639">ApacheCauseway</text><line style="stroke:#181818;stroke-width:0.5;" x1="1079" x2="1231" y1="699.7656" y2="699.7656"/><line style="stroke:#181818;stroke-width:0.5;" x1="1079" x2="1231" y1="707.7656" y2="707.7656"/></g><!--MD5=[3065a834c1969130b06cda341c336231]
class NakedObjects--><g id="elem_NakedObjects"><rect codeLine="70" fill="#F1F1F1" height="56.2656" id="NakedObjects" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="1267.5" y="659.5"/><ellipse cx="1282.5" cy="679.6328" fill="#FF7700" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1286.7344,675.3984 L1281.4531,675.3984 L1281.4531,678.0703 L1286.25,678.0703 L1286.25,680.2266 L1281.4531,680.2266 L1281.4531,685.6328 L1279.0156,685.6328 L1279.0156,673.2422 L1286.7344,673.2422 L1286.7344,675.3984 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85" x="1302.5" y="675.6387">«FrameWork»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="1296.5" y="691.4639">NakedObjects</text><line style="stroke:#181818;stroke-width:0.5;" x1="1268.5" x2="1395.5" y1="699.7656" y2="699.7656"/><line style="stroke:#181818;stroke-width:0.5;" x1="1268.5" x2="1395.5" y1="707.7656" y2="707.7656"/></g><!--MD5=[cc7ce72b489f9c0837f6b7deaaae88b5]
entity RestfulObjects--><g id="elem_RestfulObjects"><ellipse cx="1155" cy="380.5" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1104.5" y="410.4951">RestfulObjects</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="123" x="1093.5" y="360.1982">«RemoteFacade»</text></g><g id="elem_GMN30"><path d="M595,79 L595,140.5 L539.01,144.5 L595,148.5 L595,210.0625 A0,0 0 0 0 595,210.0625 L1219,210.0625 A0,0 0 0 0 1219,210.0625 L1219,89 L1209,79 L595,79 A0,0 0 0 0 595,79 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1209,79 L1209,89 L1219,89 L1209,79 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="348" x="601" y="96.0669">When ever a resource is required, the proxy is queried.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="601" y="111.1997">(1) It's served from the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="80" x="751" y="111.1997">EventStore</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="831" y="111.1997">, if possible.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="142" x="910" y="111.1997">LogEntry.cacheHits</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="1056" y="111.1997">will be incremented.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="601" y="126.3325">(2) If it's not available yet,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="769" y="126.3325">XHR</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269" x="804" y="126.3325">fetches it from remote and puts it into the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="80" x="1077" y="126.3325">EventStore</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1157" y="126.3325">.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="601" y="141.4653"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="601" y="156.5981">In any case, a</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="65" x="693" y="156.5981">LogEntry</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="442" x="762" y="156.5981">containing the response (blob) will be passed on to it's aggregator(s).</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="601" y="171.731"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="595" x="601" y="186.8638">The aggregator to be used is either determined at the point where the resource is requested,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="491" x="601" y="201.9966">or, based on the content of the response, assigned by the matching handler.</text></g><!--MD5=[211fb28d7af036b7e2906500ae0df584]
reverse link EventStore to LogEntry--><g id="link_EventStore_LogEntry"><path codeLine="41" d="M191.38,380.5 C198.73,380.5 206.08,380.5 213.43,380.5 " fill="none" id="EventStore-backto-LogEntry" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="178.15,380.5,184.15,384.5,190.15,380.5,184.15,376.5,178.15,380.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[fda71fb6b504846199848becaa7d62f5]
link ResourceProxy to EventStore--><g id="link_ResourceProxy_EventStore"><path codeLine="42" d="M366.9,175.95 C314.08,197.31 247.03,229.47 196,271 C185.39,279.64 175.31,289.86 166.05,300.53 " fill="none" id="ResourceProxy-to-EventStore" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="162.68,304.47,171.5649,300.2206,165.9257,300.6667,165.4796,295.0274,162.68,304.47" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="341.0245" y="174.987">(1)</text></g><!--MD5=[778cd200116c68d746deb5aef878df93]
link ResourceProxy to XHR--><g id="link_ResourceProxy_XHR"><path codeLine="43" d="M466.26,205.15 C475.92,248.65 488.71,306.19 496.9,343.03 " fill="none" id="ResourceProxy-to-XHR" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="498.07,348.31,500.0164,338.6554,496.9823,343.4297,492.208,340.3957,498.07,348.31" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="448.7792" y="225.5032">(2)</text></g><!--MD5=[93d2d114c2c78948f5ae0794f4c047d7]
reverse link BaseAggregator to AggregatorWithLayout--><g id="link_BaseAggregator_AggregatorWithLayout"><path codeLine="53" d="M325,751.3 C325,774.16 325,799.01 325,817.92 " fill="none" id="BaseAggregator-backto-AggregatorWithLayout" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="318,751.09,325,731.09,332,751.09,318,751.09" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[669fd67190bb8c6484cd963e3cdb7075]
link XHR to ResponseHandler--><g id="link_XHR_ResponseHandler"><path codeLine="61" d="M538.74,405.43 C603.8,451.58 748.58,554.27 843.95,621.92 " fill="none" id="XHR-to-ResponseHandler" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="848.17,624.91,843.1263,616.4506,844.086,622.0255,838.5111,622.9851,848.17,624.91" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="759" y="535.0669">TransferObject</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="765" y="550.1997">is written into</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="781.5" y="565.3325">LogEntry</text></g><!--MD5=[1e6c986c7b6158dcdbe3ab2ed500c01a]
link LogEntry to TransferObject--><g id="link_LogEntry_TransferObject"><path codeLine="62" d="M427.8,490.01 C436.5,498.3 445.3,506.39 454,514 C515.77,568.07 593.31,623.47 641.26,656.42 " fill="none" id="LogEntry-to-TransferObject" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="645.52,659.34,640.3562,650.9534,641.3952,656.514,635.8346,657.5531,645.52,659.34" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[8f69e79f47d9e536641cd65adb35e92a]
link LogEntry to BaseAggregator--><g id="link_LogEntry_BaseAggregator"><path codeLine="63" d="M325,490.32 C325,541.08 325,598.88 325,638.52 " fill="none" id="LogEntry-to-BaseAggregator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="325,643.75,329,634.75,325,638.75,321,634.75,325,643.75" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="299.1625" y="633.0153">1..n</text></g><!--MD5=[8026b4f18a77ec0460a752f560bfe8e5]
link ResponseHandler to TransferObject--><g id="link_ResponseHandler_TransferObject"><path codeLine="65" d="M848.38,687.5 C818.86,687.5 786.19,687.5 757.95,687.5 " fill="none" id="ResponseHandler-to-TransferObject" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="752.73,687.5,761.73,691.5,757.73,687.5,761.73,683.5,752.73,687.5" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="771" y="650.5669">converts</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="784.5" y="665.6997">JSON</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="780" y="680.8325">into TO</text></g><!--MD5=[b4177d15b909492f616c15d40c291f55]
reverse link RestfulObjects to ApacheCauseway--><g id="link_RestfulObjects_ApacheCauseway"><path codeLine="71" d="M1155,409.99 C1155,468.47 1155,601.42 1155,659.03 " fill="none" id="RestfulObjects-backto-ApacheCauseway" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1148,409.66,1155,389.66,1162,409.66,1148,409.66" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ff455b0d12e54cd289f5a016df291ab1]
reverse link RestfulObjects to NakedObjects--><g id="link_RestfulObjects_NakedObjects"><path codeLine="72" d="M1169.97,407.3 C1203.05,464.29 1282.1,600.52 1316.06,659.03 " fill="none" id="RestfulObjects-backto-NakedObjects" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1163.72,410.47,1159.73,389.66,1175.83,403.44,1163.72,410.47" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[1cde971cbfc4340e811b59a359229905]
link XHR to RestfulObjects--><g id="link_XHR_RestfulObjects"><path codeLine="74" d="M538.58,380.5 C655.75,380.5 1044.33,380.5 1135.66,380.5 " fill="none" id="XHR-to-RestfulObjects" style="stroke:#181818;stroke-width:1.0;"/><path d="M1142.6218,372.0428 A9,9 0 0 0 1142.6218 388.9572" fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="814.75" y="358.5669">invoke()</text><polygon fill="#000000" points="783.25,369.1992,792.2951,372.1381,792.2951,366.2603,783.25,369.1992" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="796.25" y="373.6997">json string / blob</text></g><!--MD5=[4101f8331ee1d83256b234840ad3f698]
@startuml
package handler {
    class ResponseHandler<<Facade>><<ChainOfResponsibility>>{
        handle(LogEntry)
        canHandle(json)
        doHandle()
        parse(json)
    }
}

package core {
    package event {
        class XHR {
            invoke()
        }
        class EventStore<<Cache>><<EventSourcing>> {
            log:LogEntry[]
            start()
            end()
            fault()
            find(href)
        }
        class LogEntry<<EventSourcing>> {
            url:Href
            title:String
            startedAt:Date
            updatedAt:Date
            request:String
            response:String
            blob:Blob
            object:TransferObject
            aggregators:BaseAggregator[]
            cacheHits:int
        }
        class ResourceProxy<<Proxy>> {
            + load(tObject:Tobject)
            + fetch(...)
            - process()
            - processCached()
        }

        EventStore o- LogEntry
        ResourceProxy "(1)"- -> EventStore
        ResourceProxy "(2)"- -> XHR
    }

    package aggregator {
        abstract  BaseAggregator<<Redux>><<Aggregator>> {
            update(logEntry)
        }
        abstract AggregatorWithLayout {
            layout:Layout
        }
        BaseAggregator <|.. AggregatorWithLayout
    }
}

package "to" {
    interface TransferObject<<TransferObject>>
}

XHR - -> ResponseHandler : TransferObject \n is written into \n LogEntry
LogEntry -> TransferObject
LogEntry - ->"1..n" BaseAggregator

ResponseHandler .> TransferObject : converts \n JSON \n into TO

circle RestfulObjects<<RemoteFacade>>
package remote <<Node>> {
    class ApacheCauseway<<(F, #FF7700)FrameWork>>
    class NakedObjects<<(F, #FF7700)FrameWork>>
    RestfulObjects <|- ApacheCauseway
    RestfulObjects <|- - NakedObjects
}
XHR -( RestfulObjects : invoke() \njson string / blob <

note right of ResourceProxy
When ever a resource is required, the proxy is queried.
(1) It's served from the <b>EventStore</b>, if possible. <b>LogEntry.cacheHits</b> will be incremented.
(2) If it's not available yet, <b>XHR</b> fetches it from remote and puts it into the <b>EventStore</b>.

In any case, a <b>LogEntry</b> containing the response (blob) will be passed on to it's aggregator(s).

The aggregator to be used is either determined at the point where the resource is requested,
or, based on the content of the response, assigned by the matching handler.
end note
@enduml

PlantUML version 1.2022.12(Sun Oct 23 18:12:26 GMT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>